---
layout: post
uid: touchpad-support
title: 'TouchPad Support'
tags: portfolio
---


<img src="{{ site.url }}/images/other/touchpad-support/TouchPad.png">


<div class="sqs-html-content">
  <h2>
    User Guide
  </h2>
  <p class="">
    The user guide is provided here for reference.  Many of the sections in it are available in more detail below and
    can be accessed from the menu on the left.
  </p>
</div>


<a href="{{ site.url }}/files/touchpad-support/TouchPad_User_Guide.pdf">
  <img src="{{ site.url }}/images/other/touchpad-support/TouchPad+User+Guide.png">
</a>


<hr>

<div class="sqs-html-content">
  <h3>
    Getting Started
  </h3>
  <strong>
    IMPORTANT *** Before plugging in your TouchPad *** READ THIS
  </strong>
  <ul data-rte-list="default">
    <li>
      <p class="">
        When in the programming modes, TouchPad types instructions on the screen.  Before entering these modes
        make sure you are in a blank text editor, otherwise these keystrokes could
        <strong>
          edit
        </strong>
        or
        <strong>
          delete
        </strong>
        text or files on your computer!  If TouchPad is typing and you are not in a blank text editor, it is best to unplug
        TouchPad.
      </p>
    </li>
    <li>
      <p class="">
        When connecting to Mac computers for the first time, a keyboard setup window will appear, this can be
        closed immediately.
      </p>
    </li>
    <li>
      <p class="">
        TouchPad relies on capacitive touch to detect key presses.  This is calibrated on start up between the
        power LED blinking and being on.  It is recommended that TouchPad is in the location it will be used and that you do
        not touch TouchPad during this process.
      </p>
    </li>
    <li>
      <p class="">
        Capacitive touch can be affected by changes in the surrounding environment.  If TouchPad is affected by
        this and starts malfunctioning, simply remove and reapply power to force a calibration or leave it for 8 seconds,
        after which a calibration will automatically be performed.
      </p>
    </li>
  </ul>
</div>


<hr>

<div class="sqs-html-content">
  <h3>
    TouchPad Modes
  </h3>
  <p class="">
    By default, TouchPad is in a Normal operating mode, in this mode:
  </p>
  <ul data-rte-list="default">
    <li>
      <p class="">
        Pressing and releasing keys will cause the assigned keystrokes for the current command set and pressed key to be
        sent to your device.
        <strong>
          Keystrokes are sent when you release the key.
        </strong>
      </p>
    </li>
    <li>
      <p class="">
        Pressing and swiping sideways on TouchPad will change the current command set. The display will show the new
        command set’s pattern until a key is pressed.
      </p>
    </li>
  </ul>
  <p class="">
    The following modes
    <strong>
      can only be entered upon initial power up
    </strong>
    (before any keys have been pressed), you should make sure you are in a blank text editor before entering these
    modes.  If you have already pressed a key you will need to unplug TouchPad and then plug it back in to enter these
    modes:
  </p>
  <ul data-rte-list="default">
    <li>
      <p class="">
        Pressing and swiping up on TouchPad will enter the pattern programming mode for the current command set, touch
        keys to toggle them, press and swipe down on TouchPad when you are done.
      </p>
    </li>
    <li>
      <p class="">
        Pressing and swiping down on TouchPad will enter the key programming mode for the current command set. Make the
        changes you need and then press and swipe up on TouchPad when you are done.
      </p>
    </li>
  </ul>
</div>


<a href="{{ site.url }}/images/other/touchpad-support/Modes.png">
  <img src="{{ site.url }}/images/other/touchpad-support/Modes.png">
</a>


<hr>

<div class="sqs-html-content">
  <h3>
    Video Tutorial
  </h3>
  <p class="">
    This video tutorial will guide you through how to use the On The Go Programmer to assign functionality to keys. 
    Make sure you have read
    <a href="#getting_started">
      <strong>
        Getting Started
      </strong>
    </a>
    before trying to follow along.
  </p>
</div>

<iframe src="//www.youtube.com/embed/InCHV8JHD2w?wmode=opaque&enablejsapi=1" height="480" width="854" scrolling="no"
    frameborder="0" allowfullscreen=""><br /></iframe>

<hr>

<div class="sqs-html-content">
  <h3>
    Programming Keys
  </h3>
  <p class="">
    Before entering programming modes, open a basic text editor such as Note Pad (Windows) or Text Edit (Mac).  It is
    important ALL characters have the same width.  This is standard in Note Pad on windows but in Text Edit on Mac you
    will need to go to [Format &gt; Make Plain Text].  We recommend watching the video tutorial
    <a href="#video_tutorial">
      <strong>
        ABOVE
      </strong>
    </a>
    before trying to program your TouchPad.
  </p>
  <p class="">
    In
    <strong>
      Key Programming mode,
    </strong>
    the diagram typed out by TouchPad assigns programming functions to TouchPad keys.  To start programming a key, touch
    the TouchPad key you want to program and use the TouchPad keys corresponding to the menu functions shown on screen
    to assign functionality.  When you have finished editing that key, return to edit more keys by pressing the top left
    key or return to Normal operating mode by touching and swiping up on TouchPad.
  </p>
  <p class="">
    <em>
      Factory default:
    </em>
    All keys in all command sets have no functionality.
  </p>
</div>


<a href="{{ site.url }}/images/other/touchpad-support/Prog.png">
  <img src="{{ site.url }}/images/other/touchpad-support/Prog.png">
</a>


<ul class="projects clearfix">
  <li>
    <div class="project" style='background-image: url(/images/other/touchpad-support/Picture2.png)'>
      <a class="cover" href="{{ site.url }}/images/other/touchpad-support/Picture2.png"></a>
    </div>
  </li>
  <li>
    <div class="project" style='background-image: url(/images/other/touchpad-support/Picture4.png)'>
      <a class="cover" href="{{ site.url }}/images/other/touchpad-support/Picture4.png"></a>
    </div>
  </li>
  <li>
    <div class="project" style='background-image: url(/images/other/touchpad-support/Picture3.png)'>
      <a class="cover" href="{{ site.url }}/images/other/touchpad-support/Picture3.png"></a>
    </div>
  </li>
  <li>
    <div class="project" style='background-image: url(/images/other/touchpad-support/Picture1.png)'>
      <a class="cover" href="{{ site.url }}/images/other/touchpad-support/Picture1.png"></a>
    </div>
  </li>
</ul>
<br>


<a href="{{ site.url }}/images/other/touchpad-support/Values.jpg">
  <img src="{{ site.url }}/images/other/touchpad-support/Values.jpg">
</a>


<div class="sqs-html-content">
  <p class="">
    In
    <strong>
      Pattern Programming mode,
    </strong>
    only instructions will be typed out.  This mode allows you to configure a defining pattern for the current command
    set using the key LEDs.  This pattern will be displayed when TouchPad is first plugged in and when you switch
    command sets.  It will extinguish after the first key press in that command set.  To program the pattern, touch keys
    to toggle their LED (you can’t toggle the LEDs in the bottom row, this is pre-set to the command set number).  When
    you are done, return to Normal operating mode by touching and swiping down on TouchPad.
  </p>
  <p class="">
    <em>
      Pre-set bottom row:
    </em>
    1,2,3,4 or 5 LEDs are lit based on the current command set.
  </p>
</div>


<hr>

<div class="sqs-html-content">
  <h3>
    Producing Overlays
  </h3>
  <p class="">
    TouchPad has been designed to offer flexibility in how it is used.  You can either draw on the included transparent
    overlays using a permanent marker (skip to step 3) or use the template provided to digitally produce a custom
    overlay design (start at step 1).
  </p>
  <ol data-rte-list="default">
    <li>
      <p class="">
        Visit our
        <a href="{{ site.url }}/overlay-library">
          <strong>
            Overlay Library
          </strong>
        </a>
        <a href="#supporting_files" target="_blank">
          <strong>
            <em>
            </em>
          </strong>
        </a>
        to download the TouchPad template in a DXF or SVG format. From here, use the software of your choice (we
        recommend inkscape, which can be downloaded for free from www.inkscape.org) to customise the overlay. If you are
        using inkscape you will need to open TouchPad Template.svg.
      </p>
    </li>
    <li>
      <p class="">
        Use the Layer Visibility to select which parts should print. For example you can hide the LEDs &amp;/or button
        outlines.
      </p>
    </li>
    <li>
      <p class="">
        Once you have finished designing, print the template onto transparency film, cut around the outline and use a
        standard hole punch to create the location holes.
      </p>
    </li>
    <li>
      <p class="">
        Attach your overlay to the TouchPad’s location posts. If you are customising a transparent overlay, you can now
        draw on the keys with a permanent marker.
      </p>
    </li>
    <li>
      <p class="">
        You may need to adjust the separation of the location posts to match your location holes. This can be done by
        loosening the rubber feet, adjusting the posts, and then re-tightening the rubber feet.
      </p>
    </li>
  </ol>
  <p class="">
    <strong>
      Changing overlays can trigger key presses, we advise TouchPad is unplugged for this.
    </strong>
  </p>
</div>


<a href="{{ site.url }}/images/other/touchpad-support/ezgif.com-video-to-gif+%285%29.gif">
  <img src="{{ site.url }}/images/other/touchpad-support/ezgif.com-video-to-gif+%285%29.gif">
</a>


<div class="sqs-html-content">
  <p class="">
  </p>
  <p class="">
    Summary of files available to designers:
  </p>
  <ul data-rte-list="default">
    <li>
      <p class="">
        TouchPad Template.svg: Can be used with inkscape and other drawing tools to produce custom overlays (recomended
        method)
      </p>
    </li>
    <li>
      <p class="">
        TouchPad.dxf: Alternative file format (DXF) for creating custom overlays
      </p>
    </li>
    <li>
      <p class="">
        TouchPad Overlay.dxf: Blank overlay outline (DXF)
      </p>
    </li>
  </ul>
</div>


<hr>

<div class="sqs-html-content">
  <h3>
    Installing Arduino
  </h3>
  <p class="">
    To program TouchPad using the Arduino IDE there are a number of steps you must first run through to get your
    computer setup correctly.
  </p>
  <ol data-rte-list="default">
    <li>
      <p class="">
        Install the latest version of the Arduino
        <strong>
          Desktop IDE
        </strong>
        (there are currently issues with the Windows App so compatibility with this is not guaranteed) by clicking
        <a href="https://www.arduino.cc/en/Main/Software" target="_blank">
          <strong>
            HERE
          </strong>
        </a>
        and downloading the appropriate version (install instructions available
        <a href="https://www.arduino.cc/en/Guide/HomePage" target="_blank">
          <strong>
            HERE
          </strong>
        </a>
        ).
      </p>
    </li>
    <li>
      <p class="">
        Open the Arduino IDE and go to File/Preferences.
      </p>
    </li>
    <li>
      <p class="">
        Add the .json web address (https://raw.githubusercontent.com/fourboards/TouchPad/master/Arduino_IDE_Boards_Manager/package_fourboards_index.json) to the field named Additional Boards Manager URLs ensuring multiple
        entries are comma seperated.
      </p>
      <a href="{{ site.url }}/images/other/touchpad-support/Preferences.jpg">
        <img src="{{ site.url }}/images/other/touchpad-support/Preferences.jpg">
      </a>
    </li>
    <li>
      <p class="">
        Click OK.
      </p>
    </li>
    <li>
      <p class="">
        Go to Tools/Board/Boards Manager...
      </p>
    </li>
    <li>
      <p class="">
        Search for TouchPad and select the Four Boards Boards entry.
      </p>
      <a href="{{ site.url }}/images/other/touchpad-support/Board+Manager.jpg">
        <img src="{{ site.url }}/images/other/touchpad-support/Board+Manager.jpg">
      </a>
    </li>
    <li>
      <p class="">
        Click install.
      </p>
    </li>
    <li>
      <p class="">
        Once the installation is finished restart the Arduino IDE and follow the instructions below for writing custom
        firmware.
      </p>
    </li>
  </ol>
</div>


<hr>

<div class="sqs-html-content">
  <h3>
    Custom Firmware
  </h3>
  <p class="">
    TouchPad is controlled using an ATmega32u4 microprocessor.  This means the Arduino IDE can be used to program more
    complex sequences of key strokes as well as mouse movements, MIDI and Serial commands.  To use TouchPad with
    Arduino:
  </p>
  <h2>
    Creating your modified firmware:
  </h2>
  <ol data-rte-list="default">
    <li>
      <p class="">
        Follow the steps
        <a href="#installing_arduino">
          <strong>
            ABOVE
          </strong>
        </a>
        to setup the Arduino IDE for use with TouchPad.
      </p>
    </li>
    <li>
      <p class="">
        Open the Touch_Pad sketch (available
        <a href="#supporting_files" target="_blank">
          <strong>
            HERE
          </strong>
        </a>
        ) and then edit the file as described below (Touch_Pad.ino must remain in the Touch_Pad folder with all of the
        corresponding files).
      </p>
    </li>
  </ol>
  <p class="">
    <strong>
    </strong>
    To assign code to a specific key, add it to the key's case statement, for example...
  </p>
  <p class="">
    <em>
      If you want key 1,3 (column, row) in command set 3 to type "Hello World" find the corresponding case statement
      below and adjust it as follow:
    </em>
  </p>
</div>


<div class="sqs-html-content">
  <p class="">
    <em>
      If you want key 0,1 (column, row) in command set 1 to press CTRL+C find the corresponding case statement below and
      adjust it as follow:
    </em>
  </p>
</div>


<div class="sqs-html-content">
  <p class="">
    Note that in this example a modifier key (CTRL) is being used to alter the behaviour of the 'c' key (Copy on
    Windows).  All of the keyboard's modifier keys have a number representing them, the CTRL key is 0x80 in hex (128 in
    decimal).  All of these numbers are defined in a table
    <a href="https://www.arduino.cc/reference/en/language/functions/usb/keyboard/keyboardmodifiers/" target="_blank">
      <strong>
        HERE
      </strong>
    </a>
    .  Instead of using the number though, the Arduino Keyboard library is setup so you can just insert the key name (as
    defined in the table) into the brackets of a Keyboard.press() or Keyboard.release() function demonstrated above with
    KEY_LEFT_CONTROL.
  </p>
  <p class="">
    If the key you are looking for is not defined in this table, then it will be defined in the ASCII table available
    <a href="http://www.asciitable.com/" target="_blank">
      <strong>
        HERE
      </strong>
    </a>
    .  An example of this is the SPACE bar, to use this key you must call Keyboard.press() or Keyboard.release() with
    either the character itself in single quotes (' ' for space) or the decimal ASCII value (32 for space) or the hex
    ASCII value (0x20 for space).  Hex values must be proceeded by 0x.
  </p>
  <p class="">
    There are a few keys that aren't defined in either of these places, the corresponding decimal values are: PRINT
    SCREEN = 206, SCROLL LOCK = 207, PAUSE = 208.
  </p>
  <p class="">
    The use of some characters may require the shift key to be pressed before the key that that character is on is
    pressed (just like if you were using a keyboard).  In this case make sure you release both keys before continuing! 
    Further special characters may require key codes to be typed, mirror your keyboard movements in code for these
    characters.  The language your keyboard is set to in your operating system may also effect which characters can be
    produced.
  </p>
  <p class="">
    By default the Four Boards UK Keyboard and Arduino Mouse libraries are included, reference for these can be found
    at:
  </p>
  <ul data-rte-list="default">
    <li>
      <p class="">
        <a href="https://www.arduino.cc/reference/en/language/functions/usb/keyboard/" target="_blank">
          <strong>
            https://www.arduino.cc/reference/en/language/functions/usb/keyboard/
          </strong>
        </a>
      </p>
      <ul data-rte-list="default">
        <li>
          <p class="">
            Use the following commands to control the keyboard: Keyboard.press(), Keyboard.print(), Keyboard.println(),
            Keyboard.release(), Keyboard.releaseAll(), Keyboard.write()
          </p>
        </li>
        <li>
          <p class="">
            Modifier keys are defined
            <a href="https://www.arduino.cc/reference/en/language/functions/usb/keyboard/keyboardmodifiers/"
              target="_blank">
              <strong>
                HERE
              </strong>
            </a>
          </p>
        </li>
        <li>
          <p class="">
            Keyboard.begin() is called in TouchPad.h so you do not need to call it again
          </p>
        </li>
      </ul>
    </li>
    <li>
      <p class="">
        <a href="https://www.arduino.cc/reference/en/language/functions/usb/mouse/" target="_blank">
          <strong>
            https://www.arduino.cc/reference/en/language/functions/usb/mouse/
          </strong>
        </a>
      </p>
      <ul data-rte-list="default">
        <li>
          <p class="">
            Use the following commands to control the keyboard: Mouse.click(), Mouse.move(), Mouse.press(),
            Mouse.release(), Mouse.isPressed()
          </p>
        </li>
        <li>
          <p class="">
            Mouse.begin() is called in TouchPad.h so you do not need to call it again
          </p>
        </li>
      </ul>
    </li>
  </ul>
  <p class="">
    <strong>
      Please note:
    </strong>
  </p>
  <ul data-rte-list="default">
    <li>
      <p class="">
        If the OTG programmer is enabled the key presses defined in firmware will only be executed if there are no key
        presses assigned via the 'On the go programmer', see below for disabling the OTG programmer.
      </p>
    </li>
    <li>
      <p class="">
        By default a Keyboard.releaseAll() is called after every key press, see below for disabling this.
      </p>
    </li>
  </ul>
  <h2>
    Non-UK keyboard support:
  </h2>
  <p class="">
    It is possible to modify the Arduino keyboard library for use with different language keyboard layouts.  To do this
    you need to modify the _asciimap array in Keyboard.cpp so the ASCII characters are assigned the correct key code. 
    Below is a list of alternate libraries which can be installed by replacing the KeyboardUK.cpp, KeyboardUK.h files
    with the corresponding ones:
  </p>
  <ul data-rte-list="default">
    <li>
      <p class="">
        German (by Niels) including UTF8 mapper:
        <a href="https://github.com/nsedat/KeyboardDE" target="_blank">
          https://github.com/nsedat/KeyboardDE
        </a>
      </p>
    </li>
  </ul>
  <h2>
    Adding more libraries:
  </h2>
  <p class="">
    Serial is included and initialised by default to run at a baud rate of 9600.  If you need more libraries they can be
    added beneath the Keyboard and Mouse includes.  If libraries require initialisation this must be done in the setup
    function in TouchPad.h.
  </p>
  <p class="">
    An example MIDI firmware is available in the
    <a href="#supporting_files">
      GitHub Repo
    </a>
    .
  </p>
  <h2>
    Modifying functionality:
  </h2>
  <p class="">
    For certain applications it may be desirable to disable the On The Go programmer and/or the multiple command sets. 
    This can be done by commenting out the relevant line in the TouchPad source code.  Inserting a '//' before the
    '#define statement' will disable the corresponding functionality.
  </p>
</div>


<div class="sqs-html-content">
  <h2>
    To upload your modified TouchPad firmware:
  </h2>
  <ol data-rte-list="default">
    <li>
      <p class="">
        Plug in TouchPad via the micro USB cable.
      </p>
    </li>
    <li>
      <p class="">
        In the Arduino IDE select Tools/Board/Four Boards/TouchPad.
      </p>
    </li>
    <li>
      <p class="">
        In the Arduino IDE select Tools/Port/[The COM port TouchPad is on].
      </p>
    </li>
    <li>
      <p class="">
        Press Upload (Right hand arrow).
      </p>
    </li>
    <li>
      <p class="">
        A successful upload will be acknowledged by the 'Done Uploading' text appearing in the bottom left hand corner
        of the editor.
      </p>
    </li>
  </ol>
  <p class="">
    Now you’re ready to go with your custom TouchPad firmware.
  </p>
  <h2>
    Upload not working?
  </h2>
  <ul data-rte-list="default">
    <li>
      <p class="">
        Check you have selected the correct COM port (it should say TouchPad next to it in the port selection menu).
      </p>
    </li>
    <li>
      <p class="">
        Hold down the reset button on the back of TouchPad, hit upload in the Arduino IDE, when Arduino says “Uploading”
        in the bottom left hand corner release the reset button.
      </p>
    </li>
  </ul>
  <h2>
    Factory Reset:
  </h2>
  <p class="">
    If you would like to DELETE all of the key sequences programmed via the OTG programmer in one go you will need to
    perform a factory reset as described below:
  </p>
  <ol data-rte-list="default">
    <li>
      <p class="">
        Open a custom firmware in the Arduino IDE and navigate to the TouchPad.h file.
      </p>
    </li>
    <li>
      <p class="">
        Uncomment line 40 "#define RESET" and then upload the firmware to your TouchPad.
      </p>
    </li>
    <li>
      <p class="">
        Once it is done uploading comment out line 40 and then upload the firmware once again (this prevents a factory
        reset occurring on every power cycle).
      </p>
    </li>
    <li>
      <p class="">
        The main power LED will now flash indicating the TouchPad is in factory test mode.
      </p>
    </li>
    <li>
      <p class="">
        To complete the factory reset you must press one key from each row and each column.
      </p>
    </li>
    <li>
      <p class="">
        Once complete, the LEDs will perform a quick self test and then your TouchPad will return back to the normal
        operating mode.
      </p>
    </li>
  </ol>
</div>


<hr>

<div class="sqs-html-content">
  <h3>
    Cases
  </h3>
  <p class="">
    Below is a case known to be TouchPad compatible (Photo and find by Rachel Gruber):
  </p>
  <a href="https://www.amazon.com/dp/B003LSTD38/ref=cm_sw_r_cp_ep_dp_qx8lBbTX0SY2V?th=1">
    <img src="{{ site.url }}/images/other/touchpad-support/IMG_20180624_112204.jpg">
  </a>
</div>


<hr>

<div class="sqs-html-content">
  <h3>
    Supporting Files
  </h3>
  <p class="">
    For a zip file containing just the
    <strong>
      TouchPad source code
    </strong>
    and
    <strong>
      overlay templates
    </strong>
    use the direct download link below.  Alternatively you can find these files as well as Arduino hardware definitions
    and a MIDI example at the TouchPad GitHub repository.
  </p>
</div>


<div class="projects clearfix">
  <a href="{{ site.url }}/files/touchpad-support/TouchPad_master.zip">
   <button class="button" role="button">   
     TouchPad Direct File Download
     </button>
  </a>
 </div>
 <br>
 
 
 <div class="projects clearfix">
  <a href="https://github.com/fourboards/TouchPad">
   <button class="button" role="button">   
     TouchPad GitHub
     </button>
  </a>
 </div>
 <br>


<hr>

<div class="sqs-html-content">
  <h3>
    Troubleshooting
  </h3>
  <ul data-rte-list="default">
    <li>
      <p class="">
        The text and menus printed by the TouchPad in programming modes do not make sense:
      </p>
      <ul data-rte-list="default">
        <li>
          <p class="">
            This is likely to do with how quickly your computer can process keyboard commands. Some devices struggle to
            keep up with the TouchPad. To fix this you can increase the compatibility level by touching and swiping down
            on the TouchPad whilst in Key Programming mode. After doing this the menu should be reprinted correctly. If
            it still does not make sense, increase the compatibility level further by touching and swiping down on the
            TouchPad again whilst still in Key Program mode. Note: compatibility level can be reset using “R C” in the
            EXTRA menu of any key. You must exit Key Program mode for compatibility level to be reset.
          </p>
        </li>
      </ul>
    </li>
    <li>
      <p class="">
        The shortcut you’ve setup doesn’t work:
      </p>
      <ul data-rte-list="default">
        <li>
          <p class="">
            Use a keyboard tester website such as www.keyboardtester.com to ensure TouchPad is producing the keystrokes
            you require. TouchPad will exhibit different behaviours based on your operating system language settings.
            You will not notice this using the OTG programmer but note that the Arduino Keyboard library is based around
            the US keyboard layout (By default TouchPad uses a modified version for UK keyboard layout.
          </p>
        </li>
      </ul>
    </li>
    <li>
      <p class="">
        You are having trouble uploading to TouchPad from the Arduino IDE:
      </p>
      <ul data-rte-list="default">
        <li>
          <p class="">
            Check you have selected the correct COM port (it should say TouchPad next to it in the port selection menu).
          </p>
        </li>
        <li>
          <p class="">
            Hold down the reset button on the back of TouchPad, hit upload in the Arduino IDE, when Arduino says
            “Uploading” in the bottom left hand corner release the reset button.
          </p>
        </li>
      </ul>
    </li>
    <li>
      <p class="">
        You are having trouble using the Arduino IDE:
      </p>
      <ul data-rte-list="default">
        <li>
          <p class="">
            Visit www.arduino.cc/en/Guide/Troubleshooting for general Arduino help.
          </p>
        </li>
      </ul>
    </li>
  </ul>
</div>